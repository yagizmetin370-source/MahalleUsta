{% extends 'base.html' %}
{% block title %}MahalleUsta â€“ Mahallenizin GÃ¼venilir UstalarÄ±nÄ± Bulun{% endblock %}
{% block content %}

<!-- â•â• HERO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="hero">
  <div class="hero-grid-bg"></div>
  <div class="hero-content">

    <!-- Left -->
    <div class="hero-left">
      <div class="hero-badge">
        <span class="dot"></span>
        TÃ¼rkiye'nin Mahalle Hizmet Platformu
      </div>
      <h1 class="hero-title">
        GÃ¼venilir UstayÄ±<br>
        <span class="highlight">Hemen YanÄ±nÄ±zda</span><br>
        <span class="underline-text">Bulun</span>
      </h1>
      <p class="hero-subtitle">
        ElektrikÃ§iden Ã¶zel ders hocasÄ±na, tesisatÃ§Ä±dan temizlikÃ§iye â€“ mahallenizin onaylÄ± uzmanlarÄ± tek platformda, anÄ±nda ulaÅŸabilirsiniz.
      </p>

      <form class="hero-search-box" id="heroSearchForm">
        <i class="fas fa-search"></i>
        <input type="text" id="heroSearchInput" placeholder="ElektrikÃ§i, tesisatÃ§Ä±, boyacÄ±... ne arÄ±yorsunuz?">
        <button type="submit" class="btn btn-accent btn-lg" style="border-radius: var(--radius); padding: 11px 24px;">Ara</button>
      </form>

      <div class="hero-tags">
        {% for val, label in categories[:7] %}
        <span class="hero-tag" onclick="window.location='/search?category={{ val }}'">{{ label }}</span>
        {% endfor %}
      </div>

      <div class="hero-stats">
        <div class="hero-stat">
          <div class="hero-stat-num" data-count="{{ total_providers }}">{{ total_providers }}</div>
          <div class="hero-stat-label">Hizmet Veren</div>
        </div>
        <div class="hero-stat-div"></div>
        <div class="hero-stat">
          <div class="hero-stat-num" data-count="{{ total_users }}">{{ total_users }}</div>
          <div class="hero-stat-label">KayÄ±tlÄ± Ãœye</div>
        </div>
        <div class="hero-stat-div"></div>
        <div class="hero-stat">
          <div class="hero-stat-num">%98</div>
          <div class="hero-stat-label">Memnuniyet</div>
        </div>
      </div>
    </div>

    <!-- Right: Floating cards preview -->
    <div class="hero-right">
      {% if featured %}
        {% for p in featured[:3] %}
        <a href="{{ url_for('main.provider_detail', provider_id=p.id) }}" class="hero-card" style="animation-delay: {{ loop.index0 * 0.12 }}s;">
          <div class="hero-card-head">
            {% if p.profile_photo and p.profile_photo != 'default.png' %}
            <img class="provider-avatar" src="{{ url_for('static', filename='uploads/' + p.profile_photo) }}" alt="{{ p.full_name }}" style="width:46px;height:46px;">
            {% else %}
            <div class="hero-card-avatar">{{ p.full_name[0].upper() }}</div>
            {% endif %}
            <div>
              <div class="hero-card-name">{{ p.full_name }}</div>
              <div class="hero-card-cat">{% for v,l in categories if v == p.category %}{{ l }}{% endfor %}</div>
            </div>
          </div>
          <div class="hero-card-stars">{% for i in range(1,6) %}{{ 'â˜…' if i <= p.avg_rating else 'â˜†' }}{% endfor %}</div>
          <div class="hero-card-loc"><i class="fas fa-map-marker-alt"></i>{{ p.neighborhood }}, {{ p.district }}</div>
          {% if p.is_verified %}<div class="hero-verified"><i class="fas fa-check-circle"></i> DoÄŸrulanmÄ±ÅŸ</div>{% endif %}
        </a>
        {% endfor %}
      {% else %}
        <div class="hero-card">
          <div class="hero-card-head">
            <div class="hero-card-avatar">A</div>
            <div><div class="hero-card-name">Ahmet YÄ±lmaz</div><div class="hero-card-cat">âš¡ ElektrikÃ§i</div></div>
          </div>
          <div class="hero-card-stars">â˜…â˜…â˜…â˜…â˜…</div>
          <div class="hero-card-loc"><i class="fas fa-map-marker-alt"></i> KÄ±zÄ±lay, Ã‡ankaya</div>
          <div class="hero-verified"><i class="fas fa-check-circle"></i> DoÄŸrulanmÄ±ÅŸ</div>
        </div>
        <div class="hero-card">
          <div class="hero-card-head">
            <div class="hero-card-avatar" style="background: linear-gradient(135deg,#10b981,#059669)">M</div>
            <div><div class="hero-card-name">Mehmet Demir</div><div class="hero-card-cat">ğŸ”§ TesisatÃ§Ä±</div></div>
          </div>
          <div class="hero-card-stars">â˜…â˜…â˜…â˜…â˜†</div>
          <div class="hero-card-loc"><i class="fas fa-map-marker-alt"></i> Etlik, KeÃ§iÃ¶ren</div>
        </div>
      {% endif %}
    </div>

  </div>
</section>

<!-- â•â• TRUST BAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="trust-bar">
  <div class="trust-bar-inner">
    <div class="trust-item"><i class="fas fa-shield-alt"></i> Admin OnaylÄ± Ustalar</div>
    <div class="trust-item"><i class="fas fa-star"></i> GerÃ§ek KullanÄ±cÄ± YorumlarÄ±</div>
    <div class="trust-item"><i class="fas fa-map-marker-alt"></i> Mahalle BazlÄ± Arama</div>
    <div class="trust-item"><i class="fas fa-phone"></i> DoÄŸrudan Ä°letiÅŸim</div>
    <div class="trust-item"><i class="fas fa-lock"></i> GÃ¼venli Platform</div>
  </div>
</div>

<!-- â•â• CATEGORIES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section section-white">
  <div class="container">
    <div class="section-header">
      <div class="section-label">14 Kategori</div>
      <h2 class="section-title">Ä°htiyacÄ±nÄ±za Uygun Hizmeti SeÃ§in</h2>
      <p class="section-subtitle">Her tÃ¼rlÃ¼ ev ve iÅŸyeri ihtiyacÄ±nÄ±z iÃ§in uzman hizmet verenleri bulun</p>
    </div>
    <div class="category-grid">
      {% for val, label in categories %}
      <a href="{{ url_for('main.search', category=val) }}" class="category-card anim-up">
        <span class="category-icon">{{ label.split(' ')[0] }}</span>
        <div class="category-name">{{ label.split(' ', 1)[1] if ' ' in label else label }}</div>
      </a>
      {% endfor %}
    </div>
  </div>
</section>

<!-- â•â• FEATURED PROVIDERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
{% if featured %}
<section class="section">
  <div class="container">
    <div class="section-header">
      <div class="section-label">Ã–ne Ã‡Ä±kanlar</div>
      <h2 class="section-title">GÃ¼venilir Hizmet Verenler</h2>
      <p class="section-subtitle">KullanÄ±cÄ±larÄ±mÄ±zÄ±n en Ã§ok tercih ettiÄŸi ve en yÃ¼ksek puana sahip ustalar</p>
    </div>
    <div class="providers-grid">
      {% for p in featured %}
      <a href="{{ url_for('main.provider_detail', provider_id=p.id) }}" class="provider-card anim-up">
        <div class="provider-card-header">
          {% if p.profile_photo and p.profile_photo != 'default.png' %}
          <img class="provider-avatar" src="{{ url_for('static', filename='uploads/' + p.profile_photo) }}" alt="{{ p.full_name }}">
          {% else %}
          <div class="provider-avatar-placeholder">{{ p.full_name[0].upper() }}</div>
          {% endif %}
          <div class="provider-card-info">
            <div class="provider-card-name">{{ p.full_name }}</div>
            <div class="provider-card-cat">{% for v,l in categories if v == p.category %}{{ l }}{% endfor %}</div>
            {% if p.is_verified %}<span class="badge-verified"><i class="fas fa-check-circle"></i> DoÄŸrulanmÄ±ÅŸ</span>{% endif %}
          </div>
        </div>
        <div class="provider-card-body">
          <div class="provider-location"><i class="fas fa-map-marker-alt"></i> {{ p.neighborhood }}, {{ p.district }}, {{ p.city }}</div>
          <div class="provider-desc">{{ p.description or 'Profesyonel ve kaliteli hizmet iÃ§in iletiÅŸime geÃ§in.' }}</div>
          <div class="provider-card-footer">
            <div class="stars">
              {% for i in range(1,6) %}<span class="star {{ 'filled' if i <= p.avg_rating }}">â˜…</span>{% endfor %}
              <span class="rating-text">{{ '%.1f'|format(p.avg_rating) if p.avg_rating else 'â€“' }}</span>
            </div>
            <span class="review-count"><i class="fas fa-comment-alt" style="margin-right:3px;"></i>{{ p.review_count }}</span>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
    <div class="text-center mt-4">
      <a href="{{ url_for('main.search') }}" class="btn btn-outline btn-lg">
        <i class="fas fa-th-large"></i> TÃ¼m UstalarÄ± GÃ¶r
      </a>
    </div>
  </div>
</section>
{% endif %}

<!-- â•â• HOW IT WORKS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section section-white">
  <div class="container">
    <div class="section-header">
      <div class="section-label">NasÄ±l Ã‡alÄ±ÅŸÄ±r?</div>
      <h2 class="section-title">3 AdÄ±mda UstanÄ± Bul</h2>
      <p class="section-subtitle">Basit, hÄ±zlÄ± ve gÃ¼venilir bir sÃ¼reÃ§</p>
    </div>
    <div class="steps-grid">
      <div class="step anim-up">
        <div class="step-num">1</div>
        <h3>Ara & Filtrele</h3>
        <p>Kategoriye veya mahalleye gÃ¶re filtrele. Ä°stanbul, Ankara, Ä°zmir ve daha fazla ÅŸehirde hizmet veren bulun.</p>
      </div>
      <div class="step anim-up" style="transition-delay:0.1s">
        <div class="step-num" style="background: linear-gradient(135deg, var(--accent), var(--accent-dark));">2</div>
        <h3>KarÅŸÄ±laÅŸtÄ±r</h3>
        <p>GerÃ§ek kullanÄ±cÄ± yorumlarÄ±nÄ± ve puanlarÄ± incele. DoÄŸrulanmÄ±ÅŸ ve onaylÄ± ustalar arasÄ±ndan en iyisini seÃ§.</p>
      </div>
      <div class="step anim-up" style="transition-delay:0.2s">
        <div class="step-num" style="background: linear-gradient(135deg, var(--success), #059669);">3</div>
        <h3>Ä°letiÅŸim Kur</h3>
        <p>Telefon veya WhatsApp ile doÄŸrudan ustayla iletiÅŸime geÃ§. Hizmet al, sonra yorum yap.</p>
      </div>
    </div>
  </div>
</section>

<!-- â•â• CTA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="cta-section">
  <h2>Siz de Hizmet Vermek Ä°ster misiniz?</h2>
  <p>Ãœcretsiz profil oluÅŸturun, mahallenizden binlerce potansiyel mÃ¼ÅŸteriye ulaÅŸÄ±n.</p>
  <div class="cta-btns">
    <a href="{{ url_for('provider.become_provider') }}" class="btn btn-accent btn-xl">
      <i class="fas fa-hard-hat"></i> Hizmet Veren Ol
    </a>
    <a href="{{ url_for('auth.register') }}" class="btn btn-outline-white btn-xl">
      <i class="fas fa-user-plus"></i> Ãœye Ol
    </a>
  </div>
</section>

{% endblock %}
